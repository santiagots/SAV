@using PagedList.Mvc
@using PagedList
@model SAV.Models.DetailsViajeViewModel

@{
    ViewBag.Title = "Close";
}

@using (Html.BeginForm(new { @idViaje = Model.DatosBasicosViaje.viajeID }))
{
    @Html.ValidationSummary(true)
    <div id="content">
        <div class="headTables selected">
            <p>Datos del viaje</p>
        </div>
        <div class="contenidoDatos">
            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Servicio)</p>
                @Html.DropDownListFor(model => model.DatosBasicosViaje.Servicio, from c in Enum.GetNames(typeof(SAV.Models.ViajeTipoServicio))
                                                                                 select new SelectListItem
                                                                                 {
                                                                                     Text = c,
                                                                                     Value = c
                                                                                 }, "Elija una opción", new { @disabled = "disabled" })

            </div>
            @if (Model.DatosBasicosViaje.Servicio != SAV.Models.ViajeTipoServicio.Cerrado)
            {
                <div id="ServicioAbierto" class="datosInputs">
                    <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Origen)</p>
                    @Html.DropDownListFor(model => model.DatosBasicosViaje.SelectOrigen, new SelectList(Model.DatosBasicosViaje.Origen, "Key", "Value"), "Elija una opción", new { @disabled = "disabled" })

                    <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Destino)</p>
                    @Html.DropDownListFor(model => model.DatosBasicosViaje.SelectDestino, new SelectList(Model.DatosBasicosViaje.Destino, "Key", "Value"), "Elija una opción", new { @disabled = "disabled" })
                </div>
            }
            @if (Model.DatosBasicosViaje.Servicio == SAV.Models.ViajeTipoServicio.Cerrado)
            {
                <div id="ServicioCerrado" class="datosInputs">
                    <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.OrigenCerrado)</p>
                    @Html.TextBoxFor(model => model.DatosBasicosViaje.OrigenCerrado, new { @disabled = "disabled" })


                    <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.DestinoCerrado)</p>
                    @Html.TextBoxFor(model => model.DatosBasicosViaje.DestinoCerrado, new { @disabled = "disabled" })
                </div>
            }
            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.FechaSalida)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.FechaSalida, new { @disabled = "disabled" })
            </div>

            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.HoraSalida)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.HoraSalida, new { @disabled = "disabled" })


                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.HoraArribo)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.HoraArribo, new { @disabled = "disabled" })
            </div>

            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Asientos)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.Asientos, new { @disabled = "disabled" })

                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.ConductorNombre)</p>
                @Html.DropDownListFor(model => model.DatosBasicosViaje.SelectConductorNombre, new SelectList(Model.DatosBasicosViaje.ConductorNombre, "Key", "Value"), "Elija una opción", new { @disabled = "disabled" })
            </div>

            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Patente)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.Patente, new { id = "Patente" })

                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.PatenteSuplente)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.PatenteSuplente, new { id = "PatenteSuplente" })
            </div>

            <div class="datosInputs">
                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Interno)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.Interno, new { id = "Interno" })

                <p class="edicion obligatorio">@Html.LabelFor(model => model.DatosBasicosViaje.Estado)</p>
                @Html.TextBoxFor(model => model.DatosBasicosViaje.Estado, new { @disabled = "disabled" })
            </div>

            <div class="botones">

                <div class="boton">
                    <div class="inicioBotonGris"></div>
                    <input id="modificar" class="centroBotonGris waiting" type="button" value="Modificar" onclick="$('#RazonSocial, #CUIT, #NroTicket, #Monto, #Comentario').prop('disabled', true);"></input>
                    <div class="finBotonGris"></div>
                </div>
                @if (Model.DatosBasicosViaje.Estado == SAV.Models.ViajeEstados.Abierto)
                {
                    <div class="boton">
                        <div class="inicioBotonGris"></div>
                        <input id="cerrar" class="centroBotonGris" type="submit" value="Cerrar Viaje" />
                        <div class="finBotonGris"></div>
                    </div>
                }
                <div class="boton">
                    <div class="inicioBotonGris"></div>
                    <input id="volver" class="centroBotonGris waiting disableValidation" type="button" value="Volver" onclick="location.href='@Url.Action("Search")    '"></input>
                    <div class="finBotonGris"></div>
                </div>
            </div>
        </div>
        <div class="footerTables"></div>

        <div class="contenidoDatosError">
            <p>@Html.ValidationMessageFor(model => model.DatosBasicosViaje.Patente)</p>
            <p>@Html.ValidationMessageFor(model => model.DatosBasicosViaje.PatenteSuplente)</p>
            <p>@Html.ValidationMessageFor(model => model.DatosBasicosViaje.Interno)</p>
        </div>
        <div id="Error" class="contenidoDatosError">
        </div>

        <!-- PASAJEROS TABLES -->
        <div id="partialViewPasajeros">
            @Html.Partial("_CierrePasajerosTable", Model.Pasajero)
        </div>

        @if (Model.DatosBasicosViaje.Disponible > 0)
        {
            <div class="botones">
                <div class="boton">
                    <div class="inicioBotonGris"></div>
                    <input id="agregarComision" class="centroBotonGris waiting" type="button" value="Agregar Pasajero" onclick="location.href='@Url.Action("Search", "Cliente", new { IdViaje = ViewBag.IdViaje, From = "Cierre" })    '"></input>
                    <div class="finBotonGris"></div>
                </div>
            </div>
        }
        else
        {
            <div class="botones">
                <div class="boton">
                </div>
            </div>
        }
    </div>
}
<div id="content">
    <!--ESTE FORM ESTA PORQUE SINO LOS SIGUIENTES NO SE MUESTRAN-->
    <form></form>

    <!-- ADICIONALES CONDUCTOR TABLES -->
    <div id="partialViewAdicionalConductor" style="float: right">
        @Html.Partial("_CierreAdicionalConductor", Model.AdicionalesCoductor)
    </div>
    <form id="FormAdicionalesConductor">
        <div class="alertTablesExtended" id="alertTablesExtended">
            <div class="seccion">

                <div id="tablaComisiones" class="desplegableTablaCamp" style="display: block;">
                    <table id="newGasto" class="tablesorter" style="height: 23px; margin-top: -10px">
                        <tbody>
                            <tr style="float: left; width: 965px">
                                <td class="type2 type39">
                                    <p>@Html.DropDownListFor(model => model.AdicionalCoductor.TipoAdicional, new SelectList(Model.AdicionalCoductor.TipoAdicional, "Key", "Value"), "Elija una opción", new { @class = "type203" })</p>
                                </td>
                                <td class="type2 type57">
                                    <p>@Html.TextBoxFor(model => model.AdicionalCoductor.Monto, new { id = "MontoAdicionalesConductor" })</p>
                                </td>
                                <td class="type2 type39">
                                    <p>@Html.TextBoxFor(model => model.AdicionalCoductor.Comentario, new { id = "ComentarioAdicionalesConductor" })</p>
                                </td>
                                <td class="type22">
                                    <div class="inicioBotonGris"></div>
                                    <input id="agregarAdicionalConductor" class="centroBotonGris" type="button" value="Agregar" onclick="$('#Patente, #Interno').prop('disabled', true);"></input>
                                    <div class="finBotonGris"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="contenidoDatosError">
            <p>@Html.ValidationMessageFor(model => model.AdicionalCoductor.TipoAdicional)</p>
            <p>@Html.ValidationMessageFor(model => model.AdicionalCoductor.Monto)</p>
        </div>
    </form>

    <!-- GASTOS TABLES -->
    <div id="partialViewGastos" style="float: right">
        @Html.Partial("_CierreGastosTable", Model.Gastos)
    </div>
    <form id="FormNewGasto">
        <div class="alertTablesExtended" id="alertTablesExtended">
            <div class="seccion">

                <div id="tablaComisiones" class="desplegableTablaCamp" style="display: block;">
                    <table id="newGasto" class="tablesorter" style="height: 23px; margin-top: -10px">
                        <tbody>
                            <tr style="float: left; width: 965px">
                                <td class="type2 type39">
                                    <p>@Html.DropDownListFor(model => model.NewGastos.TipoGasto, new SelectList(Model.NewGastos.TipoGasto, "Key", "Value"), "Elija una opción", new { @class = "type203" })</p>
                                </td>
                                <td class="type2 type57">
                                    <p>@Html.TextBoxFor(model => model.NewGastos.Monto, new { id = "Monto" })</p>
                                </td>
                                <td class="type2 type39">
                                    <p>@Html.TextBoxFor(model => model.NewGastos.Comentario, new { id = "Comentario" })</p>
                                </td>
                                <td class="type22">
                                    <div class="inicioBotonGris"></div>
                                    <input id="agregarGasto" class="centroBotonGris" type="button" value="Agregar" onclick="$('#Patente, #Interno').prop('disabled', true);"></input>
                                    <div class="finBotonGris"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="contenidoDatosError">
            <p>@Html.ValidationMessageFor(model => model.NewGastos.TipoGasto)</p>
            <p>@Html.ValidationMessageFor(model => model.NewGastos.Monto)</p>
        </div>
    </form>
    <div class="botones">
    </div>

    @Html.HiddenFor(model => model.DatosBasicosViaje.viajeID, new { id = "viajeID" })

</div>

    @section Scripts {

        <script src="/Scripts/ViajeClose.js"></script>
    }

